{"version":3,"file":"index.js","sources":["../src/util/index.js","../src/index.js"],"sourcesContent":["function getCwarn() {\n    let t = \"object\" == typeof console ? console.warn : noop;\n    try {\n        let e = {\n            warn: t\n        };\n        e.warn.call(e)\n    } catch (n) {\n        return noop\n    }\n    return t\n}\n\n/**\n * encodeURIComponent 转换\n * @param {*} t \n * @param {*} e \n */\nfunction encode(t, e) {\n    try {\n        t = e ? encodeURIComponent(t).replace(/\\(/g, \"%28\").replace(/\\)/g, \"%29\") : encodeURIComponent(t)\n    } catch (n) { }\n    return t\n}\n\n/**\n * 字符串替换\n * @param {*} str \n * @param {*} find \n * @param {*} replace \n */\nfunction replaceAll(str, find, replace) {\n    return str.replace(new RegExp(find, 'g'), replace);\n}\n\n\n/**\n * @param {*} t \n */\nfunction ext(t) {\n    for (let e = 1, n = arguments.length; e < n; e++) {\n        let r = arguments[e];\n        for (let o in r) {\n            Object.prototype.hasOwnProperty.call(r, o) && (t[o] = r[o])\n        }\n    }\n    return t\n}\n\nlet warn = getCwarn\n\nexport default {\n    ext,\n    warn,\n    encode,\n    replaceAll,\n}","import util from './util/index'\n\n/**\n * 监控\n */\nexport default class Monitor {\n    constructor(options = {}) {\n        if (typeof options != 'object') {\n            return util.warn(\"options is object: \" + options)\n        }\n        this.baseUrl = options.baseUrl\n        this._conf = {}\n    }\n\n    /**\n     * 监控执行\n     */\n    init() {\n\n    }\n\n    /**\n     * 监控注册\n     * @param {*} e \n     */\n    hookApp(e) {\n        let self = this,\n            t = {\n                onError: function (t) {\n                    let n = 1 === arguments.length ? [arguments[0]] : Array.apply(null, arguments),\n                        r = e.onError;\n                    try {\n                        self.error(t)\n                    } catch (t) {\n                        util.warn(\"[cloudMonitor] error in hookApp:onError\", t)\n                    }\n                    if (\"function\" == typeof r) {\n                        return r.apply(this, n)\n                    }\n                }\n            }\n\n        return util.ext({}, e, t)\n    }\n\n    /**\n     * 错误信息\n     * @param {*} t \n     * @param {*} e \n     */\n    error(t, e) {\n        if (!t) {\n            return util_1.warn(\"[cloudMonitor] invalid param e: \" + t), this\n        }\n        1 === arguments.length ? (\"string\" == typeof t && (t = {\n            message: t\n        }, e = {}), \"object\" == typeof t && (e = t = t.error || t)) : (\"string\" == typeof t && (t = {\n            message: t\n        }), \"object\" != typeof e && (e = {}));\n        let name = t.name || 'CustomError'\n        let useData = {\n            begin: Date.now(),\n            cate: name,\n            msg: t.message,\n            file: e.filename || \"\",\n            line: e.lineno || \"\",\n            col: e.colno || \"\",\n        }\n\n    }\n\n    getConfig(e) {\n        return {}\n        // return e ? this._conf[e] : util.ext({}, this._conf)\n    }\n}"],"names":["getCwarn","t","console","warn","noop","e","call","n","encode","encodeURIComponent","replace","replaceAll","str","find","RegExp","ext","arguments","length","r","o","Object","prototype","hasOwnProperty","Monitor","options","util","baseUrl","_conf","self","onError","Array","apply","error","util_1","message","name","useData","begin","Date","now","cate","msg","file","filename","line","lineno","col","colno"],"mappings":"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"}