{"version":3,"file":"index.js","sources":["../src/util/index.js","../src/index.js"],"sourcesContent":["function getCwarn() {\n    let t = \"object\" == typeof console ? console.warn : noop;\n    try {\n        let e = {\n            warn: t\n        };\n        e.warn.call(e)\n    } catch (n) {\n        return noop\n    }\n    return t\n}\n\n/**\n * encodeURIComponent 转换\n * @param {*} t \n * @param {*} e \n */\nfunction encode(t, e) {\n    try {\n        t = e ? encodeURIComponent(t).replace(/\\(/g, \"%28\").replace(/\\)/g, \"%29\") : encodeURIComponent(t)\n    } catch (n) { }\n    return t\n}\n\n/**\n * 字符串替换\n * @param {*} str \n * @param {*} find \n * @param {*} replace \n */\nfunction replaceAll(str, find, replace) {\n    return str.replace(new RegExp(find, 'g'), replace);\n}\n\n\n/**\n * @param {*} t \n */\nfunction ext(t) {\n    for (let e = 1, n = arguments.length; e < n; e++) {\n        let r = arguments[e];\n        for (let o in r) {\n            Object.prototype.hasOwnProperty.call(r, o) && (t[o] = r[o])\n        }\n    }\n    return t\n}\n\nlet warn = getCwarn\n\nexport default {\n    ext,\n    warn,\n    encode,\n    replaceAll,\n}","import util from './util/index'\n\n/**\n * 监控\n */\nexport default class Monitor {\n    constructor(options = {}) {\n        if (typeof options != 'object') {\n            return util.warn(\"options is object: \" + options)\n        }\n        this.baseUrl = options.baseUrl\n        this._conf = {}\n    }\n\n    /**\n     * 监控执行\n     */\n    init() {\n\n    }\n\n    /**\n     * 监控注册\n     * @param {*} e \n     */\n    hookApp(e) {\n        let self = this,\n            t = {\n                onError: function (t) {\n                    let n = 1 === arguments.length ? [arguments[0]] : Array.apply(null, arguments),\n                        r = e.onError;\n                    try {\n                        self.error(t)\n                    } catch (t) {\n                        util.warn(\"[cloudMonitor] error in hookApp:onError\", t)\n                    }\n                    if (\"function\" == typeof r) {\n                        return r.apply(this, n)\n                    }\n                }\n            }\n\n        return util.ext({}, e, t)\n    }\n\n    /**\n     * 错误信息\n     * @param {*} t \n     * @param {*} e \n     */\n    error(t, e) {\n        if (!t) {\n            return util_1.warn(\"[cloudMonitor] invalid param e: \" + t), this\n        }\n        1 === arguments.length ? (\"string\" == typeof t && (t = {\n            message: t\n        }, e = {}), \"object\" == typeof t && (e = t = t.error || t)) : (\"string\" == typeof t && (t = {\n            message: t\n        }), \"object\" != typeof e && (e = {}));\n        \n    }\n\n    getConfig(e) {\n        return {}\n        // return e ? this._conf[e] : util.ext({}, this._conf)\n    }\n}"],"names":["getCwarn","t","console","warn","noop","e","call","n","encode","encodeURIComponent","replace","replaceAll","str","find","RegExp","ext","arguments","length","r","o","Object","prototype","hasOwnProperty","Monitor","constructor","options","util","baseUrl","_conf","init","hookApp","self","onError","Array","apply","error","util_1","message","getConfig"],"mappings":"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"}