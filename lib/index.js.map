{"version":3,"file":"index.js","sources":["../src/util/index.js","../src/queue/base.js","../src/queue/wx.js","../src/config/wx.js","../src/conmmon/subscribe.js","../src/util/help.js","../src/wx-mini/util.js","../src/config/index.js","../src/wx-mini/handleWxEvents.js","../src/wx-mini/replace.js","../src/wx-mini/load.js","../src/wx-mini/wxInit.js","../src/config/ali.js","../src/config/web.js","../src/web/util.js","../src/conmmon/initBaseOptions.js","../src/conmmon/initLog.js","../src/react/index.js","../src/vue/help.js","../src/vue/index.js","../src/conmmon/initFun.js","../src/wx-mini/wx.js","../src/ali/util.js","../src/ali/HandleAliEvents.js","../src/ali/replace.js","../src/ali/load.js","../src/queue/ali.js","../src/ali/aliInit.js","../src/ali/ali.js","../src/web/HandleEvents.js","../src/web/replace.js","../src/web/load.js","../src/queue/web.js","../src/web/webInit.js","../src/web/web.js","../src/index.js"],"sourcesContent":["/**\n * 生成用户唯一标识码\n */\nfunction generateUUID() {\n    let uuid = '',\n        d = new Date().getTime()\n\n    uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n        let r = (d + Math.random() * 16) % 16 | 0;\n        d = Math.floor(d / 16);\n        return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16)\n    })\n\n    return uuid\n}\n\nfunction getCwarn() {\n    let t = \"object\" == typeof console ? console.warn : noop;\n    try {\n        let e = {\n            warn: t\n        };\n        e.warn.call(e)\n    } catch (n) {\n        return noop\n    }\n    return t\n}\n\n/**\n * encodeURIComponent 转换\n * @param {*} t \n * @param {*} e \n */\nfunction encode(t, e) {\n    try {\n        t = e ? encodeURIComponent(t).replace(/\\(/g, \"%28\").replace(/\\)/g, \"%29\") : encodeURIComponent(t)\n    } catch (n) { }\n    return t\n}\n\n/**\n * 字符串替换\n * @param {*} str \n * @param {*} find \n * @param {*} replace \n */\nfunction replaceAll(str, find, replace) {\n    return str.replace(new RegExp(find, 'g'), replace);\n}\n\n\n/**\n * @param {*} t \n */\nfunction ext(t) {\n    for (let e = 1, n = arguments.length; e < n; e++) {\n        let r = arguments[e];\n        for (let o in r) {\n            Object.prototype.hasOwnProperty.call(r, o) && (t[o] = r[o])\n        }\n    }\n    return t\n}\n\n/**\n * 日期格式化\n * @param {*} date \n * @param {*} fmt \n */\nfunction dateFormat(date, fmt) {\n    if (!date || !(date instanceof Date)) {\n        return \"\";\n    }\n    var o = {\n        \"M+\": date.getMonth() + 1, // 月份\n        \"d+\": date.getDate(), // 日\n        \"h+\": date.getHours(), // 小时\n        \"m+\": date.getMinutes(), // 分\n        \"s+\": date.getSeconds(), // 秒\n        \"q+\": Math.floor((date.getMonth() + 3) / 3), // 季度\n        \"S\": date.getMilliseconds() // 毫秒\n    };\n    if (/(y+)/.test(fmt))\n        fmt = fmt.replace(RegExp.$1, (date.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n    for (var k in o)\n        if (new RegExp(\"(\" + k + \")\").test(fmt))\n            fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\n    return fmt;\n}\n\n/**\n * 合并\n */\nfunction __assign() {\n    __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n\n\n\n\nlet warn = getCwarn\n\nexport default {\n    ext,\n    warn,\n    encode,\n    replaceAll,\n    generateUUID,\n    dateFormat,\n    __assign\n}","\n/**\n * 消息队列 Base\n */\nexport default class Base {\n    constructor(baseUrl) {\n        this.api = \"/api/save/log\"\n        this.baseUrl = baseUrl\n        this.requestQueue = [] // 队列\n        this.requestTimmer = undefined\n        this.synRequestNum = 4\n        this.synNum = 0\n        this.retryNum = 1 // 重试上报机制\n    }\n\n    /**\n     * 同步队列 （传入对象必须要有logType，logError）\n     * @param {*} log 队列日志\n     */\n    pushToQueue(log) {\n        {\n            // 简单先同步放入数组中\n            this.requestQueue.push(log)\n            return this.onReady(() => {\n                this.requestTimmer = this.delay(() => {\n                    this.clear()\n                }, this.requestQueue[0] && (!!this.requestQueue[0].logError && this.requestQueue[0].logError > 0) ? 3e3 : -1)\n            })\n        }\n    }\n\n    /**\n     * 宏任务（检测是否有唯一对应值）\n     * @param {*} fun\n     */\n    onReady(fun) {\n        if (typeof fun != 'function') {\n            return\n        }\n        // 检测是否有 openId 如果没有则延迟上报\n        if (fun) {\n            fun()\n        }\n    }\n\n    /**\n     * 执行队列\n     * @param {*} fun\n     * @param {*} e\n     */\n    delay(fun, e) {\n        if (!fun && typeof fun != 'function') return null\n        return e === -1 ? (fun(), null) : setTimeout(fun, e || 0)\n    }\n\n    /**\n     * 并发限制\n     * @return {?}\n     */\n    clear() {\n        var e\n        if (this.synNum > this.synRequestNum) {\n            return clearTimeout(this.requestTimmer), this.requestTimmer = setTimeout(() => {\n                this.clear()\n            }, 50)\n        }\n        for (clearTimeout(this.requestTimmer), this.requestTimmer = null; this.synNum < this.synRequestNum && (e = this.requestQueue.pop()); this.synNum++) {\n            this.handleLog(e)\n        }\n        // 执行完如果还有数据则继续执行（放到宏任务）\n        !!this.requestQueue.length && (this.requestTimmer = setTimeout(() => {\n            this.clear()\n        }, 50))\n\n    }\n\n    /**\n     * 清空队列\n     * @return {?}\n     */\n    clearAll() {\n        this.requestQueue = []\n        this.requestTimmer = null\n        this.synNum = 0\n    }\n\n    /**\n     * 并发数减一\n     * @return {?}\n     */\n    reduceSynNumFun() {\n        \n    }\n\n    /**\n     * 上报\n     * @param {*} e logType判断上传接口是哪种类型 pv：上报pv 逻辑 mv：上报mv逻辑 logError：0 代码重新上报次数0次，用int后续方便扩展\n     */\n    handleLog(e) {\n        // 深拷贝避免影响其他数据\n        let log = JSON.parse(JSON.stringify(e))\n        try {\n            this._fetch(log).then(_ => {\n                this.reduceSynNumFun()\n            })\n        } catch (err) {\n            this.reduceSynNumFun()\n        }\n    }\n\n    \n\n}","import Base from './base'\n\n/**\n * 适用于微信消息队列\n */\nexport default class wxQueue extends Base {\n    /**\n     * 单例\n     * @param {*} baseUrl\n     * @return {?}\n     */\n    static getInstance(baseUrl) {\n        if (!wxQueue.instance) {\n            wxQueue.instance = new wxQueue(baseUrl)\n        }\n        return wxQueue.instance\n    }\n\n    /**\n     * 并发数减一\n     * @return {?}\n     */\n    reduceSynNumFun() {\n        wxQueue.instance.synNum--\n        return this\n    }\n\n    _fetch(data = {}) {\n        return new Promise(resolve => {\n            wx.request({\n                url: `${this.baseUrl}${this.api}`,\n                data: data,\n                method: 'POST',\n                dataType: 'json',\n                fail: (res) => {},\n                complete: (res) => {\n                    resolve()\n                }\n            })\n        })\n    }\n}","export const WX_TYPE = 2\nexport const WxRouteEvents = ['switchTab', 'reLaunch', 'redirectTo', 'navigateTo', 'navigateBack', 'routeFail']\nexport const WxHookMethods = ['request']\nexport const WX_PROJECT_VERSION = '1.0.0' // 项目版本号\nexport const HTTP_SUCCESS = 1\nexport const HTTP_ERROR = 2\nexport const APP_CONFIG = ['onError']\nexport const PAGE_CPNFIG = ['onLoad']\nexport const ELinstenerTypes = {\n    Touchmove: 'touchmove',\n    Tap: 'tap'\n}","const handlers = {}\nconst appHandles = {}\nconst pageHandles = {}\n\n/**\n * @param {*} handler \n * @param {*} handleType \n */\nexport function subscribeEvent(handler, handleType = '') {\n    if (!handler) {\n        return\n    }\n    switch (handleType) {\n        case 'app':\n            appHandles[handler.type] = appHandles[handler.type] || []\n            appHandles[handler.type].push(handler.callback)\n            break\n        case 'page':\n            pageHandles[handler.type] = appHandles[handler.type] || []\n            pageHandles[handler.type].push(handler.callback)\n            break\n        default:\n            handlers[handler.type] = handlers[handler.type] || []\n            handlers[handler.type].push(handler.callback)\n    }\n\n}\n\n/**\n * @param {*} type \n * @param {*} data \n * @param {*} handleType\n */\nexport function triggerHandlers(type, data, handleType = '') {\n    switch (handleType) {\n        case 'app':\n            if (!type || !appHandles[type]) return\n            appHandles[type].forEach((callback) => {\n                callback(data)\n            })\n            break\n        case 'page':\n            if (!type || !pageHandles[type]) return\n            pageHandles[type].forEach((callback) => {\n                callback(data)\n            })\n            break\n        default:\n            if (!type || !handlers[type]) return\n            handlers[type].forEach((callback) => {\n                callback(data)\n            })\n    }\n}\n\n","\n/**\n * 重写对象上面的某个属性\n * @param {*} source 需要被重写的对象\n * @param {*} name 需要被重写对象的key\n * @param {*} replacement 以原有的函数作为参数，执行并重写原有函数\n * @param {*} isForced \n */\nexport function replaceOld(source, name, replacement, isForced = false) {\n    if (name in source || isForced) {\n        const original = source[name]\n        const wrapped = replacement(original)\n        if (typeof wrapped === 'function') {\n            source[name] = wrapped\n        }\n    }\n}\n\n// 函数节流\n/**\n *\n * ../param fn 需要节流的函数\n * ../param delay 节流的时间间隔\n * ../returns 返回一个包含节流功能的函数\n */\nexport const throttle = (fn, delay) => {\n    let canRun = true\n    return function (...args) {\n        if (!canRun) return\n        fn.apply(this, args)\n        canRun = false\n        setTimeout(() => {\n            canRun = true\n        }, delay)\n    }\n}\n\nexport const nativeToString = Object.prototype.toString\n\n/**\n * 校验类型\n * @param {*} type \n */\nexport function isType(type) {\n    return function (value) {\n        return nativeToString.call(value) === \"[object \" + type + \"]\";\n    };\n}\n\n\n\n// 校验枚举\nexport const variableTypeDetection = {\n    isNumber: isType('Number'),\n    isString: isType('String'),\n    isBoolean: isType('Boolean'),\n    isNull: isType('Null'),\n    isUndefined: isType('Undefined'),\n    isSymbol: isType('Symbol'),\n    isFunction: isType('Function'),\n    isObject: isType('Object'),\n    isArray: isType('Array'),\n    isProcess: isType('process'),\n    isWindow: isType('Window')\n};\n\n/**\n * 检查是否是空对象\n * ../param obj 待检测的对象\n */\nexport function isEmptyObject(obj) {\n    return variableTypeDetection.isObject(obj) && Object.keys(obj).length === 0\n}\n\nexport function isEmpty(wat) {\n    return (variableTypeDetection.isString(wat) && wat.trim() === '') || wat === undefined || wat === null\n}\n\n/**\n * Checks whether given value has a then function.\n * ../param wat A value to be checked.\n */\n// export function isThenable(wat: any): boolean {\n//   // tslint:disable:no-unsafe-any\n//   return Boolean(wat && wat.then && typeof wat.then === 'function')\n//   // tslint:enable:no-unsafe-any\n// }\n\nexport function isExistProperty(obj, key) {\n    return obj.hasOwnProperty(key)\n}\n\n/**\n * 添加事件监听器\n * @param {*} target \n * @param {*} eventName \n * @param {*} handler \n * @param {*} opitons \n */\nexport function on(target, eventName, handler, opitons = false) {\n    target.addEventListener(eventName, handler, opitons)\n}\n\n/**\n * Checks whether given value's type is one of a few Error or Error-like\n * {../link isError}.\n *\n * ../param wat A value to be checked.\n * ../returns A boolean representing the result.\n */\nexport function isError(wat) {\n    switch (nativeToString.call(wat)) {\n        case '[object Error]':\n            return true\n        case '[object Exception]':\n            return true\n        case '[object DOMException]':\n            return true\n        default:\n            return isInstanceOf(wat, Error)\n    }\n}\n\n/**\n* Checks whether given value's type is an instance of provided constructor.\n* {../link isInstanceOf}.\n*\n* ../param wat A value to be checked.\n* ../param base A constructor to be used in a check.\n* ../returns A boolean representing the result.\n*/\nexport function isInstanceOf(wat, base) {\n    try {\n        // tslint:disable-next-line:no-unsafe-any\n        return wat instanceof base\n    } catch (_e) {\n        return false\n    }\n}\n\n\n/**\n * 获取时间\n */\nexport function getTimestamp() {\n    return new Date().getTime()\n}\n\n/**\n * @param {*} version \n */\nexport function getBigVersion(version) {\n    return Number(version.split('.')[0])\n}","import { variableTypeDetection } from '../util/help'\n\n/**\n * \n * @param {*} delta \n */\nexport function getNavigateBackTargetUrl(delta) {\n    if (!variableTypeDetection.isFunction(getCurrentPages)) {\n        return '';\n    }\n    var pages = getCurrentPages();\n    if (!pages.length) {\n        return 'App';\n    }\n    delta = delta || 1;\n    var toPage = pages[pages.length - delta];\n    return setUrlQuery(toPage.route, toPage.options);\n}\n\n/**\n * url\n * @param {*} url \n * @param {*} query \n */\nexport function setUrlQuery(url, query) {\n    var queryArr = [];\n    Object.keys(query).forEach(function (k) {\n        queryArr.push(k + \"=\" + query[k]);\n    });\n    if (url.indexOf('?') !== -1) {\n        url = url + \"&\" + queryArr.join('&');\n    }\n    else {\n        url = url + \"?\" + queryArr.join('&');\n    }\n    return url;\n}\n\n/**\n * 获取当前url\n */\nexport function getPage() {\n    return getCurrentPages()[getCurrentPages().length - 1].__route__\n}\n\n","export const PAGE = 'page_pv'\nexport const JS_ERROR = 'js_error'\nexport const HTTP_LOG = 'http_log'\nexport const RESOURCE_LOAD = 'resource_load'\n","import { getPage } from './util'\nimport * as commonConfig from '../config/index'\n\n\nconst HandleWxAppEvents = {\n    onError(e) {\n        try {\n            if (!this.wxMonitor) return\n            let vm = this.wxMonitor\n            let data = {\n                simpleUrl: getPage(),\n                errorMessage: String(e)\n            }\n            vm.logSave(commonConfig.JS_ERROR, data)\n        } catch (e) { }\n    }\n}\n\nconst HandleWxPageEvents = {\n    onLoad() {\n        try {\n            if (!this.wxMonitor) return\n            let vm = this.wxMonitor,\n                toUrl = getPage()\n            let data = {\n                simpleUrl: toUrl,\n                referrer: vm.referrerPage || \"\",\n            }\n            vm.logSave(commonConfig.PAGE, data)\n            vm.referrerPage = toUrl\n        } catch (e) { }\n    }\n}\n\nexport { HandleWxAppEvents, HandleWxPageEvents }","import * as config from '../config/wx'\nimport util from '../util/index'\nimport { subscribeEvent, triggerHandlers } from '../conmmon/subscribe'\nimport { replaceOld, throttle, getTimestamp } from '../util/help'\nimport { HandleWxAppEvents, HandleWxPageEvents } from './handleWxEvents'\nimport { ELinstenerTypes } from '../config/wx'\nimport { getNavigateBackTargetUrl, getPage } from './util'\nimport * as commonConfig from '../config/index'\n\n/**\n * 添加函数\n * @param {*} handler \n * @param {*} handleType\n */\nexport function addReplaceHandler(handler, handleType) {\n    subscribeEvent(handler, handleType)\n}\n\nexport function replaceApp(wxMonitor) {\n    if (!App) {\n        return\n    }\n    HandleWxAppEvents.wxMonitor = wxMonitor\n\n    const originApp = App\n    App = function (appOptions) {\n        let methods = config.APP_CONFIG\n        methods.forEach((method) => {\n            addReplaceHandler({\n                callback: (data) => HandleWxAppEvents[method.replace('AppOn', 'on')](data),\n                type: method\n            }, 'app')\n            replaceOld(\n                appOptions,\n                method.replace('AppOn', 'on'),\n                function (originMethod) {\n                    return function (...args) {\n                        triggerHandlers.apply(null, [method, ...args, 'app'])\n                        if (originMethod) {\n                            originMethod.apply(this, args)\n                        }\n                    }\n                },\n                true\n            )\n        })\n        return originApp(appOptions)\n    }\n}\n\n/**\n * page\n * @param {*} wxMonitor \n */\nexport function replacePage(wxMonitor) {\n    if (!Page) {\n        return\n    }\n    HandleWxPageEvents.wxMonitor = wxMonitor\n\n    const originPage = Page\n    Page = function (pageOptions) {\n        let methods = config.PAGE_CPNFIG\n        // pv uv 自动化\n        methods.forEach(method => {\n            addReplaceHandler({\n                callback: (data) => HandleWxPageEvents[method.replace('PageOn', 'on')](data),\n                type: method\n            }, 'page')\n            replaceOld(\n                pageOptions,\n                method.replace('PageOn', 'on'),\n                function (originMethod) {\n                    return function (...args) {\n                        triggerHandlers.apply(null, [method, ...args, 'page'])\n                        if (originMethod) {\n                            originMethod.apply(this, args)\n                        }\n                    }\n                },\n                true\n            )\n        })\n        /**\n         * 记录用户行为\n         * @param {*} e \n         */\n        function gestureTrigger(e) {\n            e.mitoProcessed = true // 给事件对象增加特殊的标记，避免被无限透传\n            console.log('测试点击封装')\n            console.log(e)\n        }\n        function isNotAction(method) {\n            // 如果是method中处理过的方法，则不是处理用户手势行为的方法\n            return methods.find((m) => m.replace('PageOn', 'on') === method)\n        }\n        const throttleGesturetrigger = throttle(gestureTrigger, 500)\n        const linstenerTypes = [ELinstenerTypes.Touchmove, ELinstenerTypes.Tap]\n        // 用户行为重写click\n        Object.keys(pageOptions).forEach((m) => {\n            if ('function' !== typeof pageOptions[m] || isNotAction(m)) {\n                return\n            }\n            replaceOld(\n                pageOptions,\n                m,\n                function (originMethod) {\n                    return function (...args) {\n                        const e = args[0]\n                        if (e && e.type && e.currentTarget && !e.mitoProcessed) {\n                            if (linstenerTypes.indexOf(e.type)) {\n                                throttleGesturetrigger(e)\n                            }\n                        }\n                        originMethod.apply(this, args)\n                    }\n                },\n                true\n            )\n        })\n        return originPage.call(this, pageOptions)\n    }\n\n}\n\n/**\n * 路由跳转行为\n * @param {*} wxMonitor \n */\nexport function replaceRoute(wxMonitor) {\n    const vm = wxMonitor\n    // 代理跳转\n    let WxRouteEvents = config.WxRouteEvents\n    WxRouteEvents.forEach(method => {\n        let originMethod = wx[method];\n        Object.defineProperty(wx, method, {\n            writable: true,\n            enumerable: true,\n            configurable: true,\n            value: function (options) {\n                var toUrl;\n                if (method === WxRouteEvents.NavigateBack) {\n                    toUrl = getNavigateBackTargetUrl(options.delta);\n                } else {\n                    toUrl = options.url;\n                }\n                try {\n                    let data = {\n                        simpleUrl: toUrl,\n                        referrer: vm.referrerPage || \"\",\n                    }\n                    // vm.logSave('', data)\n                    // vm.referrerPage = toUrl\n                } catch (e) {\n                    util.warn('[cloudMonitor] url error')\n                }\n                return originMethod.call(this, options);\n            }\n        })\n    })\n\n}\n\n/**\n * 代理请求\n * @param {*} wxMonitor \n */\nexport function replaceNetwork(wxMonitor) {\n    let vm = wxMonitor\n    let WxHookMethods = config.WxHookMethods\n    WxHookMethods.forEach(hook => {\n        let originRequest = wx[hook];\n        Object.defineProperty(wx, hook, {\n            writable: true,\n            enumerable: true,\n            configurable: true,\n            value: function () {\n                let args = [];\n                let startTime = getTimestamp()\n                for (let _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                let options$1 = args[0];\n                let url = options$1.url || \"\"\n\n                let reqData;\n                if (hook === 'request') {\n                    reqData = options$1.data;\n                }\n                let successHandler = function (res) {\n                    try {\n                        // 上报接口报警\n                        if (!!res && res.statusCode != 200) {\n                            let data = {\n                                simpleUrl: getPage(),\n                                httpUrl: options$1.url || \"\",\n                                httpUploadType: config.HTTP_ERROR,\n                                responseText: JSON.stringify(res),\n                                httpStatus: res.statusCode\n                            }\n                            if (!!url && url != `${vm.queue.baseUrl}${vm.queue.api}`) {\n                                vm.logSave(commonConfig.HTTP_LOG, data)\n                            }\n                        } else {\n                            let endTime = getTimestamp()\n                            let consumeData = {\n                                simpleUrl: getPage(),\n                                loadTime: endTime - startTime,\n                                httpUrl: options$1.url || \"\",\n                                httpUploadType: config.HTTP_SUCCESS,\n                                responseText: JSON.stringify(res),\n                                httpStatus: res.statusCode || 200\n                            }\n                            if (!!url && url != `${vm.queue.baseUrl}${vm.queue.api}`) {\n                                vm.logSave(commonConfig.HTTP_LOG, consumeData)\n                            }\n                        }\n                    } catch (e) {\n                        util.warn('[cloudMonitor] http error')\n                    }\n                    if (typeof options$1.success === 'function') {\n                        return options$1.success(res);\n                    }\n                };\n                let failHandler = function (err) {\n                    try {\n                        let data = {\n                            simpleUrl: getPage(),\n                            httpUrl: options$1.url || \"\",\n                            httpUploadType: config.HTTP_ERROR,\n                            responseText: JSON.stringify(err),\n                            httpStatus: '0'\n                        }\n                        if (!!url && url != `${vm.queue.baseUrl}${vm.queue.api}`) {\n                            vm.logSave(commonConfig.HTTP_LOG, data)\n                        }\n                    } catch (e) {\n                        util.warn('[cloudMonitor] http error')\n                    }\n                    if (typeof options$1.fail === 'function') {\n                        return options$1.fail(err);\n                    }\n                };\n                let actOptions = util.__assign(util.__assign({}, options$1), { success: successHandler, fail: failHandler });\n                return originRequest.call(this, actOptions);\n            }\n        })\n    })\n}\n\n","import { replaceApp, replaceNetwork, replacePage } from './replace'\n\n/**\n * 初始化\n * @param {*} wxMonitor \n */\nexport function setupReplace(wxMonitor) {\n    replacePage(wxMonitor)\n    replaceApp(wxMonitor)\n    replaceNetwork(wxMonitor)\n}","import util from '../util/index'\nimport wxQueue from '../queue/wx'\nimport * as config from '../config/wx'\nimport { setupReplace } from './load'\n\nconst baseConfig = {\n    baseUrl: '',\n    autoReportApi: true, // 是否上报api \n    autoReportPage: true, // 是否上报页面信息\n    autoReportPagePerformance: true, // 是否上报页面性能\n}\n\n/**\n * 初始化微信sdk\n * @param {*} wxMonitor \n */\nexport function initMixin(wxMonitor) {\n    /**\n     * 初始化\n     * @param {*} options \n     */\n    wxMonitor._init = function (options) {\n        const vm = this\n        if (!options || !options.app) {\n            util.warn('[cloudMonitor] not set app')\n        }\n        if (!options || !options.baseUrl) {\n            util.warn('[cloudMonitor] not set baseUrl')\n        }\n        let _options = Object.assign(baseConfig, options)\n        vm.$options = _options\n        vm.queue = wxQueue.getInstance(_options.baseUrl)\n        // 初始化\n        vm.baseOptions = '' // 初始化上传参数\n        vm.referrerPage = '' // 上一个页面\n        vm.userId = '' // 用户唯一标识\n        vm.SOURCE_TYPE = config.WX_TYPE\n        vm.optionsInit(_options)\n        setupReplace(wxMonitor)\n    }\n}","export const ALI_TYPE = 3\nexport const ALI_PROJECT_VERSION = '1.0.0' // 项目版本号\nexport const APP_CONFIG = ['onError']\nexport const PAGE_CPNFIG = ['onLoad']\nexport const AliHookMethods = ['request']\nexport const HTTP_SUCCESS = 1\nexport const HTTP_ERROR = 2\nexport const ELinstenerTypes = {\n    Touchmove: 'touchmove',\n    Tap: 'tap'\n}","export const WEB_TYPE = 1\nexport const WEB_PROJECT_VERSION = '1.0.0'\nexport const HISTORY = 'history'\nexport const HASHCHANGE = 'hashchange'\nexport const DOM = 'dom'\nexport const UNHANDLEDREJECTION = 'unhandledrejection'\nexport const XHR = 'xhr'\nexport const FETCH = 'fetch'\nexport const ERROR = 'error'\nexport const HTTP_SUCCESS = 1\nexport const HTTP_ERROR = 2\nexport const PERFORMANCE = 'performance'\nexport const REACT_ERROR = 'reactError'\nexport const VUE_ERROR = 'vueError'\n\n\n/**\n * 上报错误类型\n */\nexport const ERRORTYPES = {\n    UNKNOWN: 'UNKNOWN',\n    UNKNOWN_FUNCTION: 'UNKNOWN_FUNCTION',\n    JAVASCRIPT_ERROR: 'JAVASCRIPT_ERROR',\n    LOG_ERROR: 'LOG_ERROR',\n    FETCH_ERROR: 'HTTP_ERROR',\n    VUE_ERROR: 'VUE_ERROR',\n    REACT_ERROR: 'REACT_ERROR',\n    RESOURCE_ERROR: 'RESOURCE_ERROR',\n    PROMISE_ERROR: 'PROMISE_ERROR',\n    ROUTE_ERROR: 'ROUTE_ERROR'\n}","import { ERRORTYPES } from '../config/web'\nimport { variableTypeDetection } from '../util/help'\n\n\n/**\n * 获取web 设备信息\n */\nexport function getDevice() {\n  let device = {},\n    ua = navigator.userAgent\n  /** @type {(Array<string>|null)} */\n  let android = ua.match(/(Android);?[\\s\\/]+([\\d.]+)?/);\n  /** @type {(Array<string>|null)} */\n  let showEffects = ua.match(/(iPad).*OS\\s([\\d_]+)/);\n  /** @type {(Array<string>|null)} */\n  let showPackageConstants = ua.match(/(iPod)(.*OS\\s([\\d_]+))?/);\n  /** @type {(Array<string>|boolean|null)} */\n  let showConstants = !showEffects && ua.match(/(iPhone\\sOS)\\s([\\d_]+)/);\n  /** @type {(Array<string>|null)} */\n  let cache_message = ua.match(/Android\\s[\\S\\s]+Build\\//);\n\n  if (android && (device.os = \"android\", device.osVersion = android[2], device.android = true, device.androidChrome = 0 <= ua.toLowerCase().indexOf(\"chrome\")), (showEffects || showConstants || showPackageConstants) && (device.os = \"ios\", device.ios = true), showConstants && !showPackageConstants && (device.osVersion = showConstants[2].replace(/_/g, \".\"), device.iphone = true), showEffects && (device.osVersion = showEffects[2].replace(/_/g, \".\"), device.ipad = true), showPackageConstants && (device.osVersion = showPackageConstants[3] ? showPackageConstants[3].replace(/_/g, \".\") : null, device.iphone = true), device.ios && device.osVersion && 0 <= ua.indexOf(\"Version/\") && \"10\" === device.osVersion.split(\".\")[0] && (device.osVersion = ua.toLowerCase().split(\"version/\")[1].split(\" \")[0]), device.iphone) {\n    /** @type {string} */\n    device.deviceName = \"iphone\";\n    var beginWidth = window.screen.width;\n    var upperHeight = window.screen.height;\n    if (320 === beginWidth && 480 === upperHeight) {\n      /** @type {string} */\n      device.deviceName = \"iphone 4\";\n    } else {\n      if (320 === beginWidth && 568 === upperHeight) {\n        /** @type {string} */\n        device.deviceName = \"iphone 5/SE\";\n      } else {\n        if (375 === beginWidth && 667 === upperHeight) {\n          /** @type {string} */\n          device.deviceName = \"iphone 6/7/8\";\n        } else {\n          if (414 === beginWidth && 736 === upperHeight) {\n            /** @type {string} */\n            device.deviceName = \"iphone 6/7/8 Plus\";\n          } else {\n            if (375 === beginWidth && 812 === upperHeight) {\n              /** @type {string} */\n              device.deviceName = \"iphone X/S/Max\";\n            }\n          }\n        }\n      }\n    }\n  } else {\n    if (device.ipad) {\n      /** @type {string} */\n      device.deviceName = \"ipad\";\n    } else {\n      if (cache_message) {\n        /** @type {string} */\n        var d = cache_message[0].split(\";\")[1].replace(/Build\\//g, \"\");\n        /** @type {string} */\n        device.deviceName = d.replace(/(^\\s*)|(\\s*$)/g, \"\");\n      }\n    }\n  }\n  if (-1 == ua.indexOf(\"Mobile\")) {\n    /** @type {string} */\n    let ua = navigator.userAgent.toLowerCase();\n    if (device.browserName = \"\\u672a\\u77e5\", 0 < ua.indexOf(\"msie\")) {\n      /** @type {string} */\n      var assignmentUrl = ua.match(/msie [\\d.]+;/gi)[0];\n      /** @type {string} */\n      device.browserName = assignmentUrl.split(\"/\")[0];\n      /** @type {string} */\n      device.browserVersion = assignmentUrl.split(\"/\")[1];\n    }\n    if (0 < ua.indexOf(\"firefox\")) {\n      /** @type {string} */\n      assignmentUrl = ua.match(/firefox\\/[\\d.]+/gi)[0];\n      /** @type {string} */\n      device.browserName = assignmentUrl.split(\"/\")[0];\n      /** @type {string} */\n      device.browserVersion = assignmentUrl.split(\"/\")[1];\n    }\n    if (0 < ua.indexOf(\"safari\") && ua.indexOf(\"chrome\") < 0) {\n      /** @type {string} */\n      assignmentUrl = ua.match(/safari\\/[\\d.]+/gi)[0];\n      /** @type {string} */\n      device.browserName = assignmentUrl.split(\"/\")[0];\n      /** @type {string} */\n      device.browserVersion = assignmentUrl.split(\"/\")[1];\n    }\n    if (0 < ua.indexOf(\"chrome\")) {\n      /** @type {string} */\n      assignmentUrl = ua.match(/chrome\\/[\\d.]+/gi)[0];\n      /** @type {string} */\n      device.browserName = assignmentUrl.split(\"/\")[0];\n      /** @type {string} */\n      device.browserVersion = assignmentUrl.split(\"/\")[1];\n    }\n  }\n\n  device.webView = (showConstants || showEffects || showPackageConstants) && ua.match(/.*AppleWebKit(?!.*Safari)/i)\n\n  return device;\n}\n\n/**\n * 获取当前页面地址\n */\nexport function getLocationHref() {\n  if (typeof document === 'undefined' || document.location == null) return ''\n  return document.location.href\n}\n\n/**\n * 解析error的stack，并返回args、column、line、func、url:\n * @param ex\n */\nexport function extractErrorStack(ex) {\n  const normal = {\n    name: ex.name,\n    message: ex.message\n  }\n  if (typeof ex.stack === 'undefined' || !ex.stack) {\n    return normal\n  }\n  const chrome = /^\\s*at (.*?) ?\\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\\/).*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i,\n    gecko = /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\\[native).*?|[^@]*bundle)(?::(\\d+))?(?::(\\d+))?\\s*$/i,\n    winjs = /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i,\n    // Used to additionally parse URL/line/column from eval frames\n    geckoEval = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i,\n    chromeEval = /\\((\\S*)(?::(\\d+))(?::(\\d+))\\)/,\n    lines = ex.stack.split('\\n'),\n    stack = []\n  let submatch, parts, element\n  // reference = /^(.*) is undefined$/.exec(ex.message)\n\n  for (let i = 0, j = lines.length; i < j; ++i) {\n    if ((parts = chrome.exec(lines[i]))) {\n      const isNative = parts[2] && parts[2].indexOf('native') === 0 // start of line\n      const isEval = parts[2] && parts[2].indexOf('eval') === 0 // start of line\n      if (isEval && (submatch = chromeEval.exec(parts[2]))) {\n        // throw out eval line/column and use top-most line/column number\n        parts[2] = submatch[1] // url\n        parts[3] = submatch[2] // line\n        parts[4] = submatch[3] // column\n      }\n      element = {\n        url: !isNative ? parts[2] : null,\n        func: parts[1] || ERRORTYPES.UNKNOWN_FUNCTION,\n        args: isNative ? [parts[2]] : [],\n        line: parts[3] ? +parts[3] : null,\n        column: parts[4] ? +parts[4] : null\n      }\n    } else if ((parts = winjs.exec(lines[i]))) {\n      element = {\n        url: parts[2],\n        func: parts[1] || ERRORTYPES.UNKNOWN_FUNCTION,\n        args: [],\n        line: +parts[3],\n        column: parts[4] ? +parts[4] : null\n      }\n    } else if ((parts = gecko.exec(lines[i]))) {\n      const isEval = parts[3] && parts[3].indexOf(' > eval') > -1\n      if (isEval && (submatch = geckoEval.exec(parts[3]))) {\n        // throw out eval line/coluqqqqqqqqqqqqqqqqqqqqqqqqqqqqmn and use top-most line number\n        parts[3] = submatch[1]\n        parts[4] = submatch[2]\n        parts[5] = null // no column when eval\n      } else if (i === 0 && !parts[5] && typeof ex.columnNumber !== 'undefined') {\n        // FireFox uses this awesome columnNumber property for its top frame\n        // Also note, Firefox's column number is 0-based and everything else expects 1-based,\n        // so adding 1\n        // NOTE: this hack doesn't work if top-most frame is eval\n        stack[0].column = ex.columnNumber + 1\n      }\n      element = {\n        url: parts[3],\n        func: parts[1] || ERRORTYPES.UNKNOWN_FUNCTION,\n        args: parts[2] ? parts[2].split(',') : [],\n        line: parts[4] ? +parts[4] : null,\n        column: parts[5] ? +parts[5] : null\n      }\n    } else {\n      continue\n    }\n\n    if (!element.func && element.line) {\n      element.func = ERRORTYPES.UNKNOWN_FUNCTION\n    }\n\n    stack.push(element)\n  }\n  if (!stack.length) {\n    return null\n  }\n  return {\n    ...normal,\n    stack: stack\n  }\n\n  return normal\n}\n\nconst resourceMap = {\n  img: 'img',\n  script: 'script',\n  link: 'link'\n}\n\n/**\n * 资源错误信息合并\n * @param {*} target \n */\nexport function resourceTransform(target) {\n  return {\n    simpleUrl: getLocationHref(),\n    sourceUrl: '资源地址: ' + (target.src && target.src.slice(0, 100) || target.href && target.href.slice(0, 100)),\n    elementType: `${resourceMap[target.localName] || target.localName || \"\"}`\n  }\n}\n\n/**\n * 检测路由支持情况\n */\nexport function supportsHistory() {\n  // NOTE: in Chrome App environment, touching history.pushState, *even inside\n  //       a try/catch block*, will cause Chrome to output an error to console.error\n  // borrowed from: https://github.com/angular/angular.js/pull/13945/files\n  const chrome = (window).chrome\n  // tslint:disable-next-line:no-unsafe-any\n  const isChromePackagedApp = chrome && chrome.app && chrome.app.runtime\n  const hasHistoryApi = 'history' in window && !!window.history.pushState && !!window.history.replaceState\n\n  return !isChromePackagedApp && hasHistoryApi\n}\n\n/**\n * 返回包含id、class、innerTextde字符串的标签\n * @param target html节点\n */\nexport function htmlElementAsString(target) {\n  const tagName = target.tagName.toLowerCase()\n  if (tagName === 'body' || tagName === 'html') {\n    return null\n  }\n  let classNames = target.classList.value\n  classNames = classNames !== '' ? ` class=\"${classNames}\"` : ''\n  const id = target.id ? ` id=\"${target.id}\"` : ''\n  const innerText = target.innerText\n  return `<${tagName}${id}${classNames !== '' ? classNames : ''}>${innerText}</${tagName}>`\n}\n\n/**\n * @param {*} target \n */\nexport function unknownToString(target) {\n  if (variableTypeDetection.isString(target)) {\n    return target\n  }\n  return JSON.stringify(target)\n}\n\n/**\n * 将地址字符串转换成对象\n * @returns 返回一个对象\n */\nexport function parseUrlToObj(url) {\n  if (!url) {\n    return {}\n  }\n\n  const match = url.match(/^(([^:\\/?#]+):)?(\\/\\/([^\\/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$/)\n\n  if (!match) {\n    return {}\n  }\n\n  const query = match[6] || ''\n  const fragment = match[8] || ''\n  return {\n    host: match[4],\n    path: match[5],\n    protocol: match[2],\n    relative: match[5] + query + fragment // everything minus origin\n  }\n}","import { WX_TYPE, WX_PROJECT_VERSION } from '../config/wx'\nimport { ALI_TYPE, ALI_PROJECT_VERSION } from '../config/ali'\nimport { WEB_TYPE, WEB_PROJECT_VERSION } from '../config/web'\nimport util from '../util/index'\nimport { getDevice } from '../web/util'\n\n/**\n * 初始化\n * @param {*} wxMonitor \n * @param {*} type \n */\nexport function initBaseOptions(monitor) {\n    monitor.optionsInit = function (option) {\n        let vm = this\n        let type = vm.SOURCE_TYPE\n        switch (type) {\n            case WX_TYPE:\n                // 初始化上传参数\n                wx.getSystemInfo({\n                    success: (res) => {\n                        vm.baseOptions = {\n                            app: option.app || \"\",\n                            type: WX_TYPE, // 代表微信小程序\n                            projectVersion: option.projectVersion || WX_PROJECT_VERSION, // 项目版本号\n                            customerKey: util.generateUUID(), // 会话id\n                            os: res.system.indexOf('iOS') === -1 ? 'Android' : 'IOS', // 系统信息\n                            deviceName: res.model, // 手机型号\n                            brand: res.brand, // 手机品牌\n                            browserVersion: res.version, // 小程序版本号\n                        }\n                    }\n                });\n                break\n            case ALI_TYPE:\n                // 初始化上传参数\n                my.getSystemInfo({\n                    success: (res) => {\n                        vm.baseOptions = {\n                            app: option.app || \"\",\n                            type: ALI_TYPE, // 代表微信小程序\n                            projectVersion: option.projectVersion || ALI_PROJECT_VERSION, // 项目版本号\n                            customerKey: util.generateUUID(), // 会话id\n                            os: res.platform === 'iOS' ? 'IOS' : 'Android', // 系统信息\n                            deviceName: res.model, // 手机型号\n                            brand: res.brand, // 手机品牌\n                            browserVersion: res.version, // 小程序版本号\n                        }\n                    }\n                });\n                break\n            case WEB_TYPE:\n                // 初始化web 参数\n                let configObj = getDevice()\n                vm.baseOptions = {\n                    app: option.app || \"\",\n                    type: WEB_TYPE, // 代表web\n                    projectVersion: option.projectVersion || ALI_PROJECT_VERSION, // 项目版本号\n                    customerKey: util.generateUUID(), // 会话id\n                    os: configObj.os === 'ios' ? 'IOS' : 'Android', // 系统信息\n                    deviceName: configObj.deviceName || \"\", // 手机型号\n                    brand: configObj.os + (configObj.osVersion ? \" \" + configObj.osVersion : \"\"), // 手机品牌\n                    browserVersion: configObj.osVersion, // 浏览器本号\n                }\n                break\n            default:\n                break\n        }\n    }\n\n\n}","import util from '../util/index'\nimport * as config from '../config/index'\n\n\nexport function initSaveLog(monitor) {\n    /**\n     * 上传日志\n     * @param {*} type \n     * @param {*} data \n     */\n    monitor.logSave = function (type, data) {\n        let useData,\n            logData = JSON.parse(JSON.stringify(data)),\n            vm = this\n        if (!vm.baseOptions) {\n            vm.optionsInit(vm.$options)\n            setTimeout(() => {\n                this.logSave(type, data)\n            }, 500)\n            return\n        }\n        switch (type) {\n            case config.PAGE:\n                useData = Object.assign(logData, vm.baseOptions)\n                useData.userId = vm.userId || \"\", // 用户标识\n                    useData.uploadType = type\n                useData.mobileTime = util.dateFormat(new Date(), 'yyyy-MM-dd hh:mm:ss')\n                vm.queue.pushToQueue(useData)\n                break\n            case config.JS_ERROR:\n                useData = Object.assign(logData, vm.baseOptions)\n                useData.userId = vm.userId || \"\", // 用户标识\n                    useData.uploadType = type\n                useData.mobileTime = util.dateFormat(new Date(), 'yyyy-MM-dd hh:mm:ss')\n                vm.queue.pushToQueue(useData)\n                break\n            case config.HTTP_LOG:\n                useData = Object.assign(logData, vm.baseOptions)\n                useData.userId = vm.userId || \"\", // 用户标识\n                    useData.uploadType = type\n                useData.mobileTime = util.dateFormat(new Date(), 'yyyy-MM-dd hh:mm:ss')\n                vm.queue.pushToQueue(useData)\n                break\n            case config.RESOURCE_LOAD:\n                useData = Object.assign(logData, vm.baseOptions)\n                useData.userId = vm.userId || \"\", // 用户标识\n                    useData.uploadType = type\n                useData.mobileTime = util.dateFormat(new Date(), 'yyyy-MM-dd hh:mm:ss')\n                vm.queue.pushToQueue(useData)\n                break\n            default:\n\n        }\n    }\n}","import { isError } from '../util/help'\nimport { extractErrorStack, getLocationHref } from '../web/util'\nimport * as webConfig from '../config/web'\nimport * as commonConfig from '../config/index'\n\n/**\n * 监听react 错误\n * @param {*} ex \n */\nexport function errorBoundaryReport(ex) {\n    if (!isError(ex)) {\n        console.warn('传入的react error不是一个object Error')\n        return\n    }\n    const result = extractErrorStack(ex)\n    result.type = webConfig.REACT_ERROR\n    let data = {\n        simpleUrl: getLocationHref(),\n        errorMessage: String(JSON.stringify(result))\n    }\n    vm.logSave(commonConfig.HTTP_LOG, data)\n}\n","import * as webConfig from '../config/web'\nimport * as commonConfig from '../config/index'\nimport { getLocationHref } from '../web/util'\nimport { variableTypeDetection, getBigVersion } from '../util/help'\n\n\n/**\n * vue 报错\n * @param {*} monitor \n * @param {*} err \n * @param {*} vm \n * @param {*} info \n * @param {*} Vue \n */\nexport function handleVueError(monitor, err, vm, info, Vue) {\n  const version = Vue?.version\n  let errorMessage = {\n    type: webConfig.VUE_ERROR,\n    message: `${err.message}(${info})`,\n    name: err.name,\n    stack: err.stack || [],\n  }\n  if (variableTypeDetection.isString(version)) {\n    console.log('getBigVersion', getBigVersion(version))\n    switch (getBigVersion(version)) {\n      case 2:\n        data = { ...errorMessage, ...vue2VmHandler(vm) }\n        break\n      case 3:\n        data = { ...errorMessage, ...vue3VmHandler(vm) }\n        break\n      default:\n        return\n        break\n    }\n  }\n  let param = {\n    simpleUrl: getLocationHref(),\n    errorMessage: String(errorMessage)\n  }\n  if (!monitor) return\n  monitor.logSave(commonConfig.JS_ERROR, param)\n}\n\n/**\n * vue 2\n * @param {*} vm \n */\nexport function vue2VmHandler(vm) {\n  let componentName = ''\n  if (vm.$root === vm) {\n    componentName = 'root'\n  } else {\n    const name = vm._isVue ? (vm.$options && vm.$options.name) || (vm.$options && vm.$options._componentTag) : vm.name\n    componentName =\n      (name ? 'component <' + name + '>' : 'anonymous component') +\n      (vm._isVue && vm.$options && vm.$options.__file ? ' at ' + (vm.$options && vm.$options.__file) : '')\n  }\n  return {\n    componentName,\n    propsData: vm.$options && vm.$options.propsData\n  }\n}\n\n/**\n * vue3\n * @param {*} vm \n */\nexport function vue3VmHandler(vm) {\n  let componentName = ''\n  if (vm.$root === vm) {\n    componentName = 'root'\n  } else {\n    console.log(vm.$options)\n    const name = vm.$options && vm.$options.name\n    componentName = name ? 'component <' + name + '>' : 'anonymous component'\n  }\n  return {\n    componentName,\n    propsData: vm.$props\n  }\n}","import { handleVueError } from './help'\n\n/**\n * vue 错误监听\n */\nexport const MitoVue = {\n    /**\n     * @param {*} Vue \n     */\n    install(Vue) {\n        if (!Vue || !Vue.config) return\n        let that = this\n        // vue 提供 warnHandler errorHandler报错信息\n        Vue.config.errorHandle = function (err, vm, info) {\n            handleVueError.apply(null, [that, err, vm, info, Vue])\n        }\n    }\n}\n","import { errorBoundaryReport } from '../react/index'\nimport { MitoVue } from '../vue/index'\n\n\nexport function initFun(monitor) {\n    /**\n     * 设置用户唯一标识\n     * @param {*} userId \n     */\n    monitor.setUserId = function (userId) {\n        this.userId = userId\n    }\n\n    /**\n     * react 错误上报\n     */\n    monitor.errorBoundaryReport = errorBoundaryReport\n\n    monitor.MitoVue = MitoVue\n}","import { initMixin } from './wxInit'\nimport { initBaseOptions } from '../conmmon/initBaseOptions'\nimport { initSaveLog } from '../conmmon/initLog'\nimport { initFun } from '../conmmon/initFun'\n\nlet wxMonitor = {}\n\nwxMonitor.init = function(options) {\n    this._init(options)\n}\n\ninitMixin(wxMonitor)\ninitBaseOptions(wxMonitor)\ninitSaveLog(wxMonitor)\ninitFun(wxMonitor)\n\n\nexport default wxMonitor","/**\n * 获取当前url\n */\nexport function getPage() {\n    return getCurrentPages()[getCurrentPages().length - 1].route || \"\"\n}","import { getPage } from './util'\nimport * as commonConfig from '../config/index'\n\n\nconst HandleAliAppEvents = {\n    onError(e) {\n        try {\n            if (!this.aliMonitor) return\n            let vm = this.aliMonitor\n            let data = {\n                simpleUrl: getPage(),\n                errorMessage: String(e)\n            }\n            vm.logSave(commonConfig.JS_ERROR, data)\n        } catch (e) {\n        }\n    }\n}\n\nconst HandleAliPageEvents = {\n    onLoad() {\n        try {\n            if (!this.aliMonitor) return\n            let vm = this.aliMonitor,\n                toUrl = getPage()\n            let data = {\n                simpleUrl: toUrl,\n                referrer: vm.referrerPage || \"\",\n            }\n            vm.logSave(commonConfig.PAGE, data)\n            vm.referrerPage = toUrl\n        } catch (e) {\n\n        }\n    }\n}\n\nexport { HandleAliAppEvents, HandleAliPageEvents }","import * as config from '../config/ali'\nimport util from '../util/index'\nimport { subscribeEvent, triggerHandlers } from '../conmmon/subscribe'\nimport { ELinstenerTypes } from '../config/ali'\nimport { replaceOld, throttle, getTimestamp } from '../util/help'\nimport { HandleAliAppEvents, HandleAliPageEvents } from './HandleAliEvents'\nimport { getPage } from './util'\nimport * as commonConfig from '../config/index'\n\n/**\n * 添加函数\n * @param {*} handler \n * @param {*} handleType\n */\nexport function addReplaceHandler(handler, handleType) {\n    subscribeEvent(handler, handleType)\n}\n\n/**\n * page\n * @param {*} aliMonitor \n */\nexport function replacePage(aliMonitor) {\n    if (!Page) {\n        return\n    }\n    HandleAliPageEvents.aliMonitor = aliMonitor\n\n    const originPage = Page\n    Page = function (pageOptions) {\n        let methods = config.PAGE_CPNFIG\n        // pv uv 自动化\n        methods.forEach(method => {\n            addReplaceHandler({\n                callback: (data) => HandleAliPageEvents[method.replace('PageOn', 'on')](data),\n                type: method\n            }, 'page')\n            replaceOld(\n                pageOptions,\n                method.replace('PageOn', 'on'),\n                function (originMethod) {\n                    return function (...args) {\n                        triggerHandlers.apply(null, [method, ...args, 'page'])\n                        if (originMethod) {\n                            originMethod.apply(this, args)\n                        }\n                    }\n                },\n                true\n            )\n        })\n        /**\n         * 记录用户行为\n         * @param {*} e \n         */\n        function gestureTrigger(e) {\n            e.mitoProcessed = true // 给事件对象增加特殊的标记，避免被无限透传\n            console.log('测试点击封装')\n            console.log(e)\n        }\n        function isNotAction(method) {\n            // 如果是method中处理过的方法，则不是处理用户手势行为的方法\n            return methods.find((m) => m.replace('PageOn', 'on') === method)\n        }\n        const throttleGesturetrigger = throttle(gestureTrigger, 500)\n        const linstenerTypes = [ELinstenerTypes.Touchmove, ELinstenerTypes.Tap]\n        // 用户行为重写click\n        Object.keys(pageOptions).forEach((m) => {\n            if ('function' !== typeof pageOptions[m] || isNotAction(m)) {\n                return\n            }\n            replaceOld(\n                pageOptions,\n                m,\n                function (originMethod) {\n                    return function (...args) {\n                        const e = args[0]\n                        if (e && e.type && e.currentTarget && !e.mitoProcessed) {\n                            if (linstenerTypes.indexOf(e.type)) {\n                                throttleGesturetrigger(e)\n                            }\n                        }\n                        originMethod.apply(this, args)\n                    }\n                },\n                true\n            )\n        })\n        return originPage.call(this, pageOptions)\n    }\n}\n\n/**\n * app\n * @param {*} aliMonitor \n */\nexport function replaceApp(aliMonitor) {\n    if (!App) {\n        return\n    }\n    HandleAliAppEvents.aliMonitor = aliMonitor\n    const originApp = App\n    App = function (appOptions) {\n        let methods = config.APP_CONFIG\n        methods.forEach((method) => {\n            addReplaceHandler({\n                callback: (data) => HandleAliAppEvents[method.replace('AppOn', 'on')](data),\n                type: method\n            }, 'app')\n            replaceOld(\n                appOptions,\n                method.replace('AppOn', 'on'),\n                function (originMethod) {\n                    return function (...args) {\n                        triggerHandlers.apply(null, [method, ...args, 'app'])\n                        if (originMethod) {\n                            originMethod.apply(this, args)\n                        }\n                    }\n                },\n                true\n            )\n        })\n        return originApp(appOptions)\n    }\n\n}\n\n\n/**\n * request 封装\n * @param {*} aliMonitor \n */\nexport function replaceNetwork(aliMonitor) {\n    let vm = aliMonitor\n    let AliHookMethods = config.AliHookMethods\n    AliHookMethods.forEach(hook => {\n        let originRequest = my[hook];\n        Object.defineProperty(my, hook, {\n            writable: true,\n            enumerable: true,\n            configurable: true,\n            value: function () {\n                let args = [];\n                let startTime = getTimestamp()\n                for (let _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                let options$1 = args[0];\n                let url = options$1.url || \"\"\n\n                let reqData;\n                if (hook === 'request') {\n                    reqData = options$1.data;\n                }\n                let successHandler = function (res) {\n                    try {\n                        // 上报接口报警\n                        if (!!res && res.status != 200) {\n                            let data = {\n                                simpleUrl: getPage(),\n                                httpUrl: options$1.url || \"\",\n                                httpUploadType: config.HTTP_ERROR,\n                                responseText: JSON.stringify(res),\n                                httpStatus: res.status\n                            }\n                            if (!!url && url != `${vm.queue.baseUrl}${vm.queue.api}`) {\n                                vm.logSave(commonConfig.HTTP_LOG, data)\n                            }\n                        } else {\n                            let endTime = getTimestamp()\n                            let consumeData = {\n                                simpleUrl: getPage(),\n                                loadTime: endTime - startTime,\n                                httpUrl: options$1.url || \"\",\n                                httpUploadType: config.HTTP_SUCCESS,\n                                responseText: JSON.stringify(res),\n                                httpStatus: res.status || 200\n                            }\n                            if (!!url && url != `${vm.queue.baseUrl}${vm.queue.api}`) {\n                                vm.logSave(commonConfig.HTTP_LOG, consumeData)\n                            }\n                        }\n                    } catch (e) {\n                        util.warn('[cloudMonitor] http error')\n                    }\n                    if (typeof options$1.success === 'function') {\n                        return options$1.success(res);\n                    }\n                };\n                let failHandler = function (err) {\n                    try {\n                        let data = {\n                            simpleUrl: getPage(),\n                            httpUrl: options$1.url || \"\",\n                            httpUploadType: config.HTTP_ERROR,\n                            responseText: JSON.stringify(err),\n                            httpStatus: '0'\n                        }\n                        if (!!url && url != `${vm.queue.baseUrl}${vm.queue.api}`) {\n                            vm.logSave(commonConfig.HTTP_LOG, data)\n                        }\n                    } catch (e) {\n                        util.warn('[cloudMonitor] http error')\n                    }\n                    if (typeof options$1.fail === 'function') {\n                        return options$1.fail(err);\n                    }\n                };\n                let actOptions = util.__assign(util.__assign({}, options$1), { success: successHandler, fail: failHandler });\n                return originRequest.call(this, actOptions);\n            }\n        })\n    })\n\n}","import { replacePage, replaceApp, replaceNetwork } from './replace'\n\n/**\n * 初始化\n * @param {*} aliMonitor \n */\nexport function setupReplace(aliMonitor) {\n    replacePage(aliMonitor)\n    replaceApp(aliMonitor)\n    replaceNetwork(aliMonitor)\n}","import Base from './base'\n\n/**\n * 适用于支付宝消息队列\n */\nexport default class aliQueue extends Base {\n    /**\n     * 单例\n     * @param {*} baseUrl\n     * @return {?}\n     */\n    static getInstance(baseUrl) {\n        if (!aliQueue.instance) {\n            aliQueue.instance = new aliQueue(baseUrl)\n        }\n        return aliQueue.instance\n    }\n\n    /**\n     * 并发数减一\n     * @return {?}\n     */\n    reduceSynNumFun() {\n        aliQueue.instance.synNum--\n        return this\n    }\n\n    _fetch(data = {}) {\n        return new Promise(resolve => {\n            my.request({\n                url: `${this.baseUrl}${this.api}`,\n                data: data,\n                method: 'POST',\n                dataType: 'json',\n                fail: (res) => {},\n                complete: (res) => {\n                    resolve()\n                }\n            })\n        })\n    }\n}","import util from '../util/index'\nimport { setupReplace } from './load'\nimport aliQueue from '../queue/ali'\nimport * as config from '../config/ali'\n\nconst baseConfig = {\n    baseUrl: '',\n    autoReportApi: true, // 是否上报api \n    autoReportPage: true, // 是否上报页面信息\n    autoReportPagePerformance: true, // 是否上报页面性能\n}\n\n/**\n * 初始化支付宝sdk\n * @param {*} aliMonitor \n */\nexport function initMixin(aliMonitor) {\n    aliMonitor._init = function (options) {\n        const vm = this\n        if (!options || !options.app) {\n            util.warn('[cloudMonitor] not set app')\n        }\n        if (!options || !options.baseUrl) {\n            util.warn('[cloudMonitor] not set baseUrl')\n        }\n        let _options = Object.assign(baseConfig, options)\n        vm.$options = _options\n        vm.queue = aliQueue.getInstance(_options.baseUrl)\n        // 初始化\n        vm.baseOptions = '' // 初始化上传参数\n        vm.referrerPage = '' // 上一个页面\n        vm.userId = '' // 用户唯一标识\n        vm.SOURCE_TYPE = config.ALI_TYPE\n        vm.optionsInit(_options)\n        setupReplace(aliMonitor)\n    }\n}","import { initMixin } from './aliInit'\nimport { initBaseOptions } from '../conmmon/initBaseOptions'\nimport { initSaveLog } from '../conmmon/initLog'\nimport { initFun } from '../conmmon/initFun'\n\nlet aliMonitor = {}\n\naliMonitor.init = function(options) {\n    this._init(options)\n}\n\ninitMixin(aliMonitor)\ninitBaseOptions(aliMonitor)\ninitSaveLog(aliMonitor)\ninitFun(aliMonitor)\n\n\nexport default aliMonitor","import { isError } from '../util/help'\nimport { extractErrorStack, resourceTransform } from './util'\nimport { ERRORTYPES, HTTP_SUCCESS, HTTP_ERROR } from '../config/web'\nimport { getLocationHref, unknownToString, parseUrlToObj } from './util'\nimport * as commonConfig from '../config/index'\n\n\nconst HandleEvents = {\n  /**\n   * 处理xhr、fetch回调\n   * @param {*} data \n   */\n  handleHttp(data) {\n    if (!this.webMonitor) return\n    let vm = this.webMonitor\n    let param = ''\n    let url = data.url || \"\"\n    if (!!data && data.status != 200) {\n      param = {\n        simpleUrl: getLocationHref(),\n        httpUrl: data.url || \"\",\n        httpUploadType: HTTP_ERROR,\n        responseText: JSON.stringify(data.responseText || \"\"),\n        httpStatus: data.status || 0\n      }\n      if (!!param && !!url && url != `${vm.queue.baseUrl}${vm.queue.api}`) {\n        vm.logSave(commonConfig.HTTP_LOG, param)\n      }\n    }\n    if (!!data && data.status == 200) {\n      param = {\n        simpleUrl: getLocationHref(),\n        loadTime: data.elapsedTime || 0,\n        httpUrl: data.url || \"\",\n        httpUploadType: HTTP_SUCCESS,\n        responseText: JSON.stringify(data.responseText || \"\"),\n        httpStatus: data.status || 200\n      }\n    }\n    if (!!param && !!url && url != `${vm.queue.baseUrl}${vm.queue.api}`) {\n      vm.logSave(commonConfig.HTTP_LOG, param)\n    }\n  },\n\n  /**\n   * js 错误\n   * @param {*} errorEvent \n   */\n  handleError(errorEvent) {\n    if (!this.webMonitor) return\n    let vm = this.webMonitor\n    const target = errorEvent.target\n    // 资源错误上报\n    if (!!target.localName) {\n      let resourceData = resourceTransform(errorEvent.target)\n      vm.logSave(commonConfig.RESOURCE_LOAD, resourceData)\n      return\n    }\n    // code error\n    const { message, lineno, colno, error } = errorEvent\n    let result\n    if (error && isError(error)) {\n      result = extractErrorStack(error)\n    }\n    // 处理SyntaxError，stack没有lineno、colno\n    result || (result = HandleEvents.handleNotErrorInstance(message, lineno, colno))\n\n    let data = {\n      simpleUrl: getLocationHref(),\n      errorMessage: String(JSON.stringify(result))\n    }\n    vm.logSave(commonConfig.JS_ERROR, data)\n  },\n  /**\n   * 处理SyntaxError，stack没有lineno、colno\n   * @param {*} message \n   * @param {*} lineno \n   * @param {*} colno \n   */\n  handleNotErrorInstance(message, lineno, colno) {\n    let name = ERRORTYPES.UNKNOWN\n    let msg = message\n    const matches = message.match(ERROR_TYPE_RE)\n    if (matches[1]) {\n      name = matches[1]\n      msg = matches[2]\n    }\n    const element = {\n      func: ERRORTYPES.UNKNOWN_FUNCTION,\n      args: ERRORTYPES.UNKNOWN,\n      line: lineno,\n      col: colno\n    }\n    return {\n      name,\n      message: msg,\n      level: Severity.Normal,\n      time: getTimestamp(),\n      stack: [element]\n    }\n  },\n  /**\n   * history 模式下路由注册\n   * @param {*} data \n   */\n  handleHistory(data) {\n    this.savePv(data)\n  },\n  /**\n   * hash\n   * @param {*} data\n   */\n  handleHashchange(data) {\n    this.savePv(data)\n  },\n  /**\n   * 上报pv\n   * @param {*} data \n   */\n  savePv(data) {\n    try {\n      if (!this.webMonitor) return\n      let vm = this.webMonitor\n      let { from, to } = data\n      let { relative: parsedFrom } = parseUrlToObj(from)\n      let { relative: parsedTo } = parseUrlToObj(to)\n      let param = {\n        simpleUrl: parsedFrom ? parsedFrom : '/',\n        referrer: parsedTo ? parsedTo : '/'\n      }\n      vm.logSave(commonConfig.PAGE, param)\n    } catch (e) {\n\n    }\n  },\n  /**\n   * Promise\n   * @param {*} ev \n   */\n  handleUnhandleRejection(ev) {\n    console.log('测试')\n    console.log(ev)\n    if (!this.webMonitor) return\n    let data\n    let vm = this.webMonitor\n    data = {\n      type: ERRORTYPES.PROMISE_ERROR,\n      message: unknownToString(ev.reason),\n      url: getLocationHref(),\n      name: ev.type,\n    }\n    if (isError(ev.reason)) {\n      data = {\n        ...data,\n        ...extractErrorStack(ev.reason)\n      }\n    }\n    let result = {\n      simpleUrl: getLocationHref(),\n      errorMessage: String(JSON.stringify(data))\n    }\n    vm.logSave(commonConfig.JS_ERROR, result)\n  }\n\n}\n\nexport { HandleEvents }","import { HandleEvents } from './HandleEvents'\nimport { on, replaceOld, isExistProperty, throttle, variableTypeDetection, getTimestamp } from '../util/help'\nimport { subscribeEvent, triggerHandlers } from '../conmmon/subscribe'\nimport * as webConfig from '../config/web'\nimport { getLocationHref, supportsHistory, htmlElementAsString } from './util'\n\n/**\n * 添加方法\n * @param {*} handler \n */\nexport function addReplaceHandler(handler) {\n    subscribeEvent(handler)\n}\n\n/**\n * http 请求监控\n */\nexport function replaceNetwork() {\n    if (!('XMLHttpRequest' in window)) {\n        return\n    }\n    addReplaceHandler({\n        callback: (data) => {\n            HandleEvents.handleHttp(data)\n        },\n        type: webConfig.XHR\n    })\n    const originalXhrProto = XMLHttpRequest.prototype\n    replaceOld(\n        originalXhrProto,\n        'open',\n        (originalOpen) => {\n            return function (...args) {\n                this.mito_xhr = {\n                    method: variableTypeDetection.isString(args[0]) ? args[0].toUpperCase() : args[0],\n                    url: args[1] || \"\",\n                    type: webConfig.XHR,\n                    startTime: getTimestamp()\n                }\n                originalOpen.apply(this, args)\n            }\n        }\n    )\n    replaceOld(\n        originalXhrProto,\n        'send',\n        function (originalSend) {\n            return function (...args) {\n\n                on(this, 'loadend', function () {\n                    try {\n                        const { responseType, response, status } = this\n                        this.mito_xhr.reqData = args[0]\n                        const eTime = getTimestamp()\n                        this.mito_xhr.time = eTime\n                        this.mito_xhr.status = status\n                        if (['', 'json', 'text'].indexOf(responseType) !== -1) {\n                            this.mito_xhr.responseText = typeof response === 'object' ? JSON.stringify(response) : response\n                        }\n                        this.mito_xhr.elapsedTime = eTime - this.mito_xhr.startTime\n                        triggerHandlers(webConfig.XHR, this.mito_xhr)\n                    } catch (e) { }\n                })\n                originalSend.apply(this, args)\n            }\n        }\n    )\n\n}\n\n/**\n * 处理fetch请求\n */\nexport function replaceFetch() {\n    if (!('fetch' in window)) {\n        return\n    }\n    addReplaceHandler({\n        callback: (data) => {\n            HandleEvents.handleHttp(data)\n        },\n        type: webConfig.FETCH\n    })\n    replaceOld(window, webConfig.FETCH, (originalFetch) => {\n        return function (url, config) {\n            try {\n                const sTime = getTimestamp()\n                const method = (config && config.method) || 'GET'\n                let handlerData = {\n                    type: webConfig.FETCH,\n                    method,\n                    reqData: config && config.body,\n                    url\n                }\n                const headers = new Headers(config && config.headers || {})\n                Object.assign(headers, {\n                    setRequestHeader: headers.set\n                })\n                config = {\n                    ...config,\n                    headers\n                }\n                return originalFetch.apply(window, [url, config]).then(res => {\n                    const tempRes = res.clone()\n                    const eTime = getTimestamp()\n                    handlerData = {\n                        ...handlerData,\n                        elapsedTime: eTime - sTime,\n                        status: tempRes.status,\n                        // statusText: tempRes.statusText,\n                        time: eTime\n                    }\n                    tempRes.text().then((data) => {\n                        try {\n                            handlerData.responseText = (typeof data === 'string') ? JSON.parse(data) : \"\"\n                        } catch (e) {\n                            handlerData.responseText = \"\"\n                        }\n                        triggerHandlers(webConfig.FETCH, handlerData)\n                    })\n                    return res\n                }, err => {\n                    const eTime = getTimestamp()\n                    handlerData = {\n                        ...handlerData,\n                        elapsedTime: eTime - sTime,\n                        status: 0,\n                        // statusText: err.name + err.message,\n                        time: eTime\n                    }\n                    triggerHandlers(webConfig.FETCH, handlerData)\n                    throw err\n                })\n            } catch (e) {\n                return originalFetch.apply(window, [url, config]).then(res => {\n                    return res\n                }, err => {\n                    throw err\n                })\n            }\n        }\n    })\n}\n\n/**\n * 错误监控\n */\nexport function replaceError() {\n    // 先添加方法到数组\n    addReplaceHandler({\n        callback: (error) => {\n            HandleEvents.handleError(error)\n        },\n        type: webConfig.ERROR\n    })\n    on(\n        window,\n        webConfig.ERROR,\n        function (e) {\n            triggerHandlers(webConfig.ERROR, e)\n        },\n        true\n    )\n}\n\n// 上一次的路由\nlet lastHref\nlastHref = getLocationHref()\n\n// hashchange\nexport function listenHashchange() {\n    addReplaceHandler({\n        callback: (e) => {\n            HandleEvents.handleHashchange(e)\n        },\n        type: webConfig.HASHCHANGE\n    })\n    if (!isExistProperty(window, 'onpopstate')) {\n        on(window, webConfig.HASHCHANGE, function (e) {\n            triggerHandlers(webConfig.HASHCHANGE, e)\n        })\n    }\n}\n\n// history\nexport function historyReplace() {\n    // 先添加方法到数组\n    addReplaceHandler({\n        callback: (data) => {\n            HandleEvents.handleHistory(data)\n        },\n        type: webConfig.HISTORY\n    })\n    if (!supportsHistory()) return\n    const oldOnpopstate = window.onpopstate\n    window.onpopstate = function (...args) {\n        const to = getLocationHref()\n        const from = lastHref\n        triggerHandlers(webConfig.HISTORY, {\n            from,\n            to\n        })\n        oldOnpopstate && oldOnpopstate.apply(this, args)\n    }\n    function historyReplaceFn(originalHistoryFn) {\n        return function (...args) {\n            const url = args.length > 2 ? args[2] : undefined\n            if (url) {\n                const from = lastHref\n                const to = String(url)\n                lastHref = to\n                triggerHandlers(webConfig.HISTORY, {\n                    from,\n                    to\n                })\n            }\n            return originalHistoryFn.apply(this, args)\n        }\n    }\n    replaceOld(window.history, 'pushState', historyReplaceFn)\n    replaceOld(window.history, 'replaceState', historyReplaceFn)\n}\n\nconst clickThrottle = throttle(triggerHandlers, 600)\n\n// 页面点击\nexport function domReplace() {\n    if (!('document' in window)) return\n    addReplaceHandler({\n        callback: (data) => {\n            const htmlString = htmlElementAsString(data.data.srcElement)\n            if (htmlString) {\n\n            }\n        },\n        type: webConfig.DOM\n    })\n    on(\n        window.document,\n        'click',\n        function (e) {\n            clickThrottle(webConfig.DOM, {\n                category: 'click',\n                data: e\n            })\n        },\n        true\n    )\n    // 暂时不需要keypress的重写\n    // on(\n    //   window.document,\n    //   'keypress',\n    //   function (e) {\n    //     keypressThrottle('dom', {\n    //       category: 'keypress',\n    //       data: this\n    //     })\n    //   },\n    //   true\n    // )\n}\n\n// Promise\nexport function unhandledrejectionReplace() {\n    addReplaceHandler({\n        callback: (data) => {\n            HandleEvents.handleUnhandleRejection(data)\n        },\n        type: webConfig.UNHANDLEDREJECTION\n    })\n    on(window, webConfig.UNHANDLEDREJECTION, function (ev) {\n        // ev.preventDefault() 阻止默认行为后，控制台就不会再报红色错误\n        triggerHandlers(webConfig.UNHANDLEDREJECTION, ev)\n    })\n}\n\n/**\n * https://blog.csdn.net/lovenjoe/article/details/80260658\n * DNS查询耗时 ：domainLookupEnd - domainLookupStart\n * TCP链接耗时 ：connectEnd - connectStart\n * request请求耗时 ：responseEnd - responseStart\n * 解析dom树耗时 ： domComplete- domInteractive\n * 白屏时间 ：responseStart - navigationStart\n * domready时间 ：domContentLoadedEventEnd - navigationStart\n * onload时间 ：loadEventEnd - navigationStart\n * 相关资料\n * https://segmentfault.com/a/1190000004010453\n * https://github.com/fredshare/blog/issues/5\n * https://javascript.ruanyifeng.com/bom/performance.html#toc5\n */\nexport function performanceReplace() {\n    addReplaceHandler({\n        callback: (data) => {\n            HandleEvents.handleUnhandleRejection(data)\n        },\n        type: webConfig.PERFORMANCE\n    })\n    window.onload = () => {\n        let performance = window.performance\n        if (!performance) {\n            // 当前浏览器不支持\n            console.log('你的浏览器不支持 performance 接口');\n            return;\n        }\n        // let times = performance.timing.toJSON()\n        // 发送页面性能指标数据, 上报内容 => \n        // let perf = this._objectSpread({}, times, {\n        //     url: \"\".concat(window.location.host).concat(window.location.pathname)\n        // })\n        // 页面耗时\n        // console.log(perf)\n        // 资源耗时\n        // console.log(performance.getEntries())\n        // 浏览器内存情况 usedJSHeapSize表示所有被使用的js堆栈内存；totalJSHeapSize表示当前js堆栈内存总大小，这表示usedJSHeapSize不能大于totalJSHeapSize，如果大于，有可能出现了内存泄漏。\n        // console.log(performance.memory)\n    }\n\n}","\nimport { replaceNetwork, replaceError, listenHashchange, historyReplace, domReplace, unhandledrejectionReplace, replaceFetch, performanceReplace } from './replace'\nimport { HandleEvents } from './HandleEvents'\n\n\n/**\n * 针对web 载入\n * @param {*} webMonitor \n */\nexport function setupReplace(webMonitor) {\n    HandleEvents.webMonitor = webMonitor\n    // 处理http\n    replaceNetwork()\n    // 处理fetch 请求\n    replaceFetch()\n    // js 错误\n    replaceError()\n    // Promise 错误\n    unhandledrejectionReplace()\n    // pv uv\n    listenHashchange()\n    historyReplace()\n    // 页面点击\n    domReplace()\n    // performance 性能\n    performanceReplace()\n}\n","import Base from './base'\n\n/**\n * 适用于web消息队列\n */\nexport default class webQueue extends Base {\n    /**\n     * 单例\n     * @param {*} baseUrl\n     * @return {?}\n     */\n    static getInstance(baseUrl) {\n        if (!webQueue.instance) {\n            webQueue.instance = new webQueue(baseUrl)\n        }\n        return webQueue.instance\n    }\n\n    /**\n     * 并发数减一\n     * @return {?}\n     */\n    reduceSynNumFun() {\n        webQueue.instance.synNum--\n        return this\n    }\n\n    _fetch(data = {}) {\n        return new Promise(resolve => {\n            \n            try {\n                const xhr = new XMLHttpRequest()\n                function state_Change() {\n                    /**\n                     * 0    Uninitialized  初始化状态。XMLHttpRequest 对象已创建或已被 abort() 方法重置。\n                     * 1    Open           open() 方法已调用，但是 send() 方法未调用。请求还没有被发送。\n                     * 2    Sent           Send() 方法已调用，HTTP 请求已发送到 Web 服务器。未接收到响应。\n                     * 3    Receiving      所有响应头部都已经接收到。响应体开始接收但未完成。\n                     * 4    Loaded         HTTP 响应已经完全接收。\n                     */\n                    if (xhr.readyState === 4) {\n                        resolve()\n                    }\n                }\n                xhr.open('POST', `${this.baseUrl}${this.api}`)\n                xhr.onreadystatechange = state_Change;\n                xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8')\n                xhr.withCredentials = true\n                xhr.send(JSON.stringify(data))\n            } catch (e) {\n                resolve()\n            }\n        })\n    }\n}","import util from '../util/index'\nimport { setupReplace } from './load'\nimport webQueue from '../queue/web'\nimport * as config from '../config/web'\n\nconst baseConfig = {\n    baseUrl: '',\n    autoReportApi: true, // 是否上报api \n    autoReportPage: true, // 是否上报页面信息\n    autoReportPagePerformance: true, // 是否上报页面性能\n}\n\nexport function initMixin(webMonitor) {\n    webMonitor._init = function (options) {\n        const vm = this\n        if (!options || !options.app) {\n            util.warn('[cloudMonitor] not set app')\n        }\n        if (!options || !options.baseUrl) {\n            util.warn('[cloudMonitor] not set baseUrl')\n        }\n        let _options = Object.assign(baseConfig, options)\n        vm.$options = _options\n        vm.queue = webQueue.getInstance(_options.baseUrl)\n        // 初始化\n        vm.baseOptions = '' // 初始化上传参数\n        vm.referrerPage = '' // 上一个页面\n        vm.userId = '' // 用户唯一标识\n        vm.SOURCE_TYPE = config.WEB_TYPE\n        vm.optionsInit(_options)\n        setupReplace(webMonitor)\n    }\n}","import { initMixin } from './webInit'\nimport { initBaseOptions } from '../conmmon/initBaseOptions'\nimport { initSaveLog } from '../conmmon/initLog'\nimport { initFun } from '../conmmon/initFun'\n\nlet webMonitor = {}\n\nwebMonitor.init = function(options) {\n    this._init(options)\n}\n\ninitMixin(webMonitor)\ninitBaseOptions(webMonitor)\ninitSaveLog(webMonitor)\ninitFun(webMonitor)\n\n\nexport default webMonitor","import wx from './wx-mini/wx'\nimport ali from './ali/ali'\nimport web from './web/web'\n\n/**\n * 监控导出\n */\nexport const wxMonitor = wx\nexport const aliMonitor = ali\nexport const webMonitor = web"],"names":["generateUUID","uuid","d","Date","getTime","replace","c","r","Math","random","floor","toString","getCwarn","t","console","warn","noop","e","call","n","encode","encodeURIComponent","replaceAll","str","find","RegExp","ext","arguments","length","o","Object","prototype","hasOwnProperty","dateFormat","date","fmt","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","test","$1","getFullYear","substr","k","__assign","assign","s","i","p","apply","Base","baseUrl","api","requestQueue","requestTimmer","undefined","synRequestNum","synNum","retryNum","log","push","onReady","delay","clear","logError","fun","setTimeout","clearTimeout","pop","handleLog","JSON","parse","stringify","_fetch","then","_","reduceSynNumFun","err","wxQueue","instance","data","Promise","resolve","wx","request","url","method","dataType","fail","res","complete","WX_TYPE","WxHookMethods","WX_PROJECT_VERSION","HTTP_SUCCESS","HTTP_ERROR","APP_CONFIG","PAGE_CPNFIG","ELinstenerTypes","Touchmove","Tap","handlers","appHandles","pageHandles","subscribeEvent","handler","handleType","type","callback","triggerHandlers","forEach","replaceOld","source","name","replacement","isForced","original","wrapped","throttle","fn","canRun","args","nativeToString","isType","value","variableTypeDetection","isNumber","isString","isBoolean","isNull","isUndefined","isSymbol","isFunction","isObject","isArray","isProcess","isWindow","isExistProperty","obj","key","on","target","eventName","opitons","addEventListener","isError","wat","isInstanceOf","Error","base","_e","getTimestamp","getBigVersion","version","Number","split","getPage","getCurrentPages","__route__","PAGE","JS_ERROR","HTTP_LOG","RESOURCE_LOAD","HandleWxAppEvents","onError","wxMonitor","vm","simpleUrl","errorMessage","String","logSave","commonConfig","HandleWxPageEvents","onLoad","toUrl","referrer","referrerPage","addReplaceHandler","replaceApp","App","originApp","appOptions","methods","config","originMethod","replacePage","Page","originPage","pageOptions","gestureTrigger","mitoProcessed","isNotAction","m","throttleGesturetrigger","linstenerTypes","keys","currentTarget","indexOf","replaceNetwork","hook","originRequest","defineProperty","writable","enumerable","configurable","startTime","_i","options$1","reqData","successHandler","statusCode","httpUrl","httpUploadType","responseText","httpStatus","queue","endTime","consumeData","loadTime","util","success","failHandler","actOptions","setupReplace","baseConfig","autoReportApi","autoReportPage","autoReportPagePerformance","initMixin","_init","options","app","_options","$options","getInstance","baseOptions","userId","SOURCE_TYPE","optionsInit","ALI_TYPE","ALI_PROJECT_VERSION","AliHookMethods","WEB_TYPE","HISTORY","HASHCHANGE","DOM","UNHANDLEDREJECTION","XHR","FETCH","ERROR","PERFORMANCE","REACT_ERROR","VUE_ERROR","ERRORTYPES","UNKNOWN","UNKNOWN_FUNCTION","JAVASCRIPT_ERROR","LOG_ERROR","FETCH_ERROR","RESOURCE_ERROR","PROMISE_ERROR","ROUTE_ERROR","getDevice","device","ua","navigator","userAgent","android","match","showEffects","showPackageConstants","showConstants","cache_message","os","osVersion","androidChrome","toLowerCase","ios","iphone","ipad","deviceName","beginWidth","window","screen","width","upperHeight","height","browserName","assignmentUrl","browserVersion","webView","getLocationHref","document","location","href","extractErrorStack","ex","normal","message","stack","chrome","gecko","winjs","geckoEval","chromeEval","lines","submatch","parts","element","j","exec","isNative","isEval","func","line","column","columnNumber","resourceMap","img","script","link","resourceTransform","sourceUrl","src","slice","elementType","localName","supportsHistory","isChromePackagedApp","runtime","hasHistoryApi","history","pushState","replaceState","htmlElementAsString","tagName","classNames","classList","id","innerText","unknownToString","parseUrlToObj","query","fragment","host","path","protocol","relative","initBaseOptions","monitor","option","getSystemInfo","projectVersion","customerKey","system","model","brand","my","platform","configObj","initSaveLog","useData","logData","uploadType","mobileTime","pushToQueue","errorBoundaryReport","result","webConfig","handleVueError","info","Vue","vue2VmHandler","vue3VmHandler","param","componentName","$root","_isVue","_componentTag","__file","propsData","$props","MitoVue","install","that","errorHandle","initFun","setUserId","init","route","HandleAliAppEvents","aliMonitor","HandleAliPageEvents","status","aliQueue","HandleEvents","handleHttp","webMonitor","elapsedTime","handleError","errorEvent","resourceData","lineno","colno","error","handleNotErrorInstance","msg","matches","ERROR_TYPE_RE","col","level","Severity","Normal","time","handleHistory","savePv","handleHashchange","from","to","parsedFrom","parsedTo","handleUnhandleRejection","ev","reason","originalXhrProto","XMLHttpRequest","originalOpen","mito_xhr","toUpperCase","originalSend","responseType","response","eTime","replaceFetch","originalFetch","sTime","handlerData","body","headers","Headers","setRequestHeader","set","tempRes","clone","text","replaceError","lastHref","listenHashchange","historyReplace","oldOnpopstate","onpopstate","historyReplaceFn","originalHistoryFn","clickThrottle","domReplace","htmlString","srcElement","category","unhandledrejectionReplace","performanceReplace","onload","performance","webQueue","state_Change","xhr","readyState","open","onreadystatechange","withCredentials","send","ali","web"],"mappings":"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"}